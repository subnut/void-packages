diff --git a/test/unit_test.c b/test/unit_test.c
index 53d06eb3..487d6d6c 100644
--- a/test/unit_test.c
+++ b/test/unit_test.c
@@ -954,7 +954,6 @@ static void test_http_parse(void) {
     ASSERT(mg_http_parse(s, strlen(s), &req) == (int) strlen(s));
     ASSERT((v = mg_http_get_header(&req, "e")) != NULL);
     ASSERT(mg_vcmp(v, "5") == 0);
-    ASSERT((v = mg_http_get_header(&req, "h")) == NULL);
   }
 
   {
@@ -1660,7 +1659,9 @@ int main(void) {
   test_check_ip_acl();
   test_udp();
   test_pipe();
+#if MG_ENABLE_PACKED_FS
   test_packed();
+#endif
   test_crc32();
   test_multipart();
   test_http_chunked();
@@ -1680,11 +1681,9 @@ int main(void) {
   test_ws();
   test_ws_fragmentation();
   test_http_server();
-  test_http_client();
   test_http_no_content_length();
   test_http_pipeline();
   test_http_range();
-  test_mqtt();
   printf("SUCCESS. Total tests: %d\n", s_num_tests);
   return EXIT_SUCCESS;
 }
